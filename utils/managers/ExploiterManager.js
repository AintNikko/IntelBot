const Exploiters = require('../models/Exploiters');

module.exports = class ExploiterManager {
    constructor(client) {
        this.client = client;
    }

    async get(robloxId) {
        const data = await Exploiters.findOne({ robloxId });
        if (!data) return null;
        return data;
    }

    async set(robloxId, newData = {}) {
        const data = await this.get(robloxId);
        if (data) {
            return await data.updateOne(newData);
        } else {
            const updated = Object.assign(newData, { robloxId });
            return await new Exploiters(updated).save();
        }
    }

    async addEvidence(robloxId, evidence) {
        const data = await this.get(robloxId);
        if (!data) return null;
        return await data.updateOne({ $push: { evidence: evidence } });
    }
};